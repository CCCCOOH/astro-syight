---
import { getCollection } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";
import Tag from "../../components/Tag.astro";
import HomeBackground from "../../components/HomeBackground.astro";
import BasicCard from "../../components/BasicCard.astro";
const posts = await getCollection("blog");
const allPosts = posts.filter(
  (post: any) => post?.rendered?.metadata?.frontmatter?.tags
);

const tags = [
  ...new Set(
    allPosts
      .map((post: any) => post?.rendered?.metadata?.frontmatter.tags)
      .flat()
  ),
];

const pageTitle = "Tags";
---

<!-- 这里发现不能使用forEach，因为forEach不能返回一个标签，而map可以。 -->
<BaseLayout pageTitle={pageTitle}>
  <HomeBackground />
  {
    allPosts.length > 0 && (
      <div class="flex justify-center items-center">
        <BasicCard
          id="tags-container"
          class="flex gap-10 justify-center items-center flex-wrap"
        >
          {tags.map((tag: any) => (
            <Tag tag={tag} />
          ))}
        </BasicCard>
      </div>
    )
  }
</BaseLayout>

<style>
  #tags-container {
    margin-top: 30px;
    padding: 20px;
  }
</style>
